(function(){"use strict";var e={2476:function(e,t,a){var i=a(6848),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.form,size:"mini"}},[t("el-form-item",{attrs:{label:"token"}},[t("el-input",{attrs:{clearable:""},on:{change:e.authorizationChange},model:{value:e.Authorization,callback:function(t){e.Authorization="string"===typeof t?t.trim():t},expression:"Authorization"}})],1),t("el-form-item",{attrs:{label:"员工姓名",prop:"userName"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName","string"===typeof t?t.trim():t)},expression:"form.userName"}})],1),t("el-form-item",{attrs:{label:"员工工号",prop:"jobNumber"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.jobNumber,callback:function(t){e.$set(e.form,"jobNumber","string"===typeof t?t.trim():t)},expression:"form.jobNumber"}})],1),t("el-form-item",{attrs:{label:"部门",prop:"userDept"}},[t("el-select",{model:{value:e.form.userDept,callback:function(t){e.$set(e.form,"userDept",t)},expression:"form.userDept"}},[t("el-option",{attrs:{label:"电子商务部-创维业务部",value:"电子商务部-创维业务部"}}),t("el-option",{attrs:{label:"市场部",value:"市场部"}}),t("el-option",{attrs:{label:"电子商务部-经营管理部",value:"电子商务部-经营管理部"}}),t("el-option",{attrs:{label:"电子商务部-数智营销部",value:"电子商务部-数智营销部"}}),t("el-option",{attrs:{label:"电子商务部-用户体验部",value:"电子商务部-用户体验部"}}),t("el-option",{attrs:{label:"电子商务部-分销业务部",value:"电子商务部-分销业务部"}}),t("el-option",{attrs:{label:"电子商务部-直播运营部",value:"电子商务部-直播运营部"}}),t("el-option",{attrs:{label:"用户运营科",value:"用户运营科"}}),t("el-option",{attrs:{label:"营销管理部",value:"营销管理部"}}),t("el-option",{attrs:{label:"商品管理部",value:"商品管理部"}}),t("el-option",{attrs:{label:"人力资源部",value:"人力资源部"}}),t("el-option",{attrs:{label:"战略客户部",value:"战略客户部"}}),t("el-option",{attrs:{label:"新零售业务部",value:"新零售业务部"}}),t("el-option",{attrs:{label:"产品规划部",value:"产品规划部"}}),t("el-option",{attrs:{label:"KA业务部",value:"KA业务部"}}),t("el-option",{attrs:{label:"酷开电商",value:"酷开电商"}}),t("el-option",{attrs:{label:"中部大区",value:"中部大区"}}),t("el-option",{attrs:{label:"湘赣大区",value:"湘赣大区"}}),t("el-option",{attrs:{label:"山东大区",value:"山东大区"}}),t("el-option",{attrs:{label:"东南大区",value:"东南大区"}}),t("el-option",{attrs:{label:"东北大区",value:"东北大区"}}),t("el-option",{attrs:{label:"华中大区",value:"华中大区"}}),t("el-option",{attrs:{label:"华南大区",value:"华南大区"}}),t("el-option",{attrs:{label:"晋蒙大区",value:"晋蒙大区"}}),t("el-option",{attrs:{label:"华北大区",value:"华北大区"}}),t("el-option",{attrs:{label:"云桂大区",value:"云桂大区"}}),t("el-option",{attrs:{label:"华东大区",value:"华东大区"}}),t("el-option",{attrs:{label:"西北大区",value:"西北大区"}}),t("el-option",{attrs:{label:"西南大区",value:"西南大区"}}),t("el-option",{attrs:{label:"站外达人",value:"站外达人"}})],1)],1),t("el-form-item",{attrs:{label:"员工电话",prop:"userNumber"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.userNumber,callback:function(t){e.$set(e.form,"userNumber","string"===typeof t?t.trim():t)},expression:"form.userNumber"}})],1)],1),t("el-upload",{ref:"upload",attrs:{action:"#",accept:".png,.jpg,.jpeg","list-type":"picture-card","auto-upload":!1,limit:50,multiple:"","on-preview":e.handlePreview,"on-remove":e.handleChange,"on-change":e.handleChange,"file-list":e.fileList}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"90%",top:"50px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),t("div",{staticClass:"button"},[t("el-switch",{attrs:{"active-text":"开启相同图片检测（默认）","inactive-text":"禁用相同图片检测","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.checkSame,callback:function(t){e.checkSame=t},expression:"checkSame"}})],1),t("div",{staticClass:"button"},[t("span",[e._v("已选图片"+e._s(e.fileList.length)+"张")]),t("span",{staticStyle:{color:"#409eff"}},[e._v("成功"+e._s(e.successNum))]),t("span",{staticStyle:{color:"#ff4949"}},[e._v("失败"+e._s(e.failNum))]),t("span",{on:{click:e.reset}},[t("i",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"22px",cursor:"pointer"}}),e._v(" (重置统计) ")])]),t("div",{staticClass:"button"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.del}},[e._v("清空图片")]),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.submitUpload}},[e._v("提交")])],1)],1)},r=[],l=(a(8992),a(3949),a(4413)),s=a.n(l),n=a(4373),u=a(5165),c=a.n(u);new(s()),n.A.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e.response.data)}));const p=new(c());var m={name:"App",data(){return{form:{userName:"",jobNumber:"",userDept:"",userNumber:""},Authorization:"",fileList:[],dialogImageUrl:"",dialogVisible:!1,checkSame:!0,successNum:0,failNum:0}},created(){this.Authorization=localStorage.getItem("Authorization")||"",this.getUser()},methods:{getUser(){this.Authorization&&n.A.get("https://uc-admin.skyallhere.com/api/reviewsManagement/mini/getMyLastRecord?pageNum=1&pageSize=20",{headers:{Authorization:this.Authorization}}).then((e=>{200==e.code&&(this.form={userName:e.data.userName,jobNumber:e.data.jobNumber,userDept:e.data.userDept,userNumber:e.data.userNumber})})).catch((e=>{this.$message({message:e.msg,type:"warning",showClose:!0})}))},authorizationChange(){localStorage.setItem("Authorization",this.Authorization),this.Authorization?(this.$message({message:"token已经更改",type:"success",showClose:!0}),this.getUser()):this.$refs["ruleForm"].resetFields()},submitUpload(){0!=this.fileList.length?this.fileList.forEach(((e,t)=>{setTimeout((()=>{p.md5(e.raw,(async(a,i)=>{if(a)console.log(a);else{if(this.checkSame){let e=await n.A.get(`https://uc-admin.skyallhere.com/api/reviewsManagement/mini/checkIfPicExist/${i}`,{headers:{Authorization:this.Authorization}});if(500==e.code)return this.failNum++,void this.$message({message:`第${t+1}张图片已经上传过`,type:"warning",showClose:!0})}let a=new FormData;a.append("filename",e.raw);let o=await n.A.post("https://uc-api.skyallhere.com/miniprogram/api/upload?type=picture&tartgetDirectory=reputation",a);if(0!==o.code)return this.failNum++,void this.$message({message:"图传上传失败",type:"warning",showClose:!0});n.A.post("https://uc-admin.skyallhere.com/api/reviewsManagement/mini/save",{jobNumber:this.form.jobNumber,userDept:this.form.userDept,score:"",picUrls:o.data,userName:this.form.userName,userNumber:this.form.userNumber,noteUrl:"",picMd5s:i,type:1},{headers:{Authorization:this.Authorization}}).then((e=>{200==e.code&&(this.successNum++,this.$message({message:`第${t+1}张提交成功`,type:"success",showClose:!0}))}))}}))}),6e3*t)})):this.$message({message:"请上传图片",type:"warning",showClose:!0})},handleChange(e,t){this.fileList=t},handlePreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},del(){this.fileList=[],this.reset()},reset(){this.successNum=0,this.failNum=0}}},f=m,h=a(1656),b=(0,h.A)(f,o,r,!1,null,null,null),d=b.exports,v=a(9143),g=a.n(v);i["default"].config.productionTip=!1,i["default"].use(g()),new i["default"]({render:e=>e(d)}).$mount("#app")}},t={};function a(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,o,r){if(!i){var l=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],r=e[c][2];for(var s=!0,n=0;n<i.length;n++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](i[n])}))?i.splice(n--,1):(s=!1,r<l&&(l=r));if(s){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,l=i[0],s=i[1],n=i[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(n)var c=n(a)}for(t&&t(i);u<l.length;u++)r=l[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},i=self["webpackChunkchuangwei"]=self["webpackChunkchuangwei"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(2476)}));i=a.O(i)})();